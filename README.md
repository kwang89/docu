# 동시성 제어 정보 블로그
- https://velog.io/@c1madang/Concurrency-Control
  - 동시성 제어의 정의/목적/방법
  - Lock의 종료
  - Lock별로 장단점

# 동시성 문제 해결 전략
- https://brewagebear.github.io/concurrency-distributed-transaction-with-tcc/
  - TCC 패턴
 
# 최종 일관성
- https://www.msaschool.io/operation/integration/integration-four/
  - TCC 패턴보다 구현이 쉽다고 이야기함

# Saga Pattern의 트랜잭션 정리
- https://velog.io/@daehoon12/%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4-%ED%8C%A8%ED%84%B4-4.-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EA%B4%80%EB%A6%AC-%EC%82%AC%EA%B0%80#432-%EB%B9%84%EA%B2%A9%EB%A6%AC-%EB%8C%80%EC%B1%85


안녕하세요! 상품 관리에 대한 데이터베이스 설계를 요청하셨는데요, 비즈니스 유연성과 성능을 고려하여 다음과 같은 데이터 모델을 제안드립니다. 

## 데이터베이스 설계

### 1. **엔티티 개요**

- **Product (상품)**
  - `ProductID`: 고유 식별자 (Primary Key, UUID 또는 Auto-Increment Integer)
  - `ProductName`: 상품 이름
  - `ProductDescription`: 상품 설명
  - `Price`: 상품 가격
  - `StockQuantity`: 재고 수량
  - `CategoryID`: 상품 카테고리 (Foreign Key, `Category` 테이블 참조)
  - `CreatedAt`: 생성일시
  - `UpdatedAt`: 수정일시
  - **비즈니스 유연성:** 이 구조는 기본적인 상품 정보와 관련된 다양한 기능을 유연하게 관리할 수 있게 해줍니다. 추가 필드가 필요하면 쉽게 확장할 수 있습니다.

- **Category (카테고리)**
  - `CategoryID`: 고유 식별자 (Primary Key, UUID 또는 Auto-Increment Integer)
  - `CategoryName`: 카테고리 이름
  - `ParentCategoryID`: 부모 카테고리 (Self-referencing Foreign Key, `Category` 테이블 참조)
  - **비즈니스 유연성:** 카테고리 구조를 계층적으로 관리할 수 있어, 상품 분류를 다양하게 관리할 수 있습니다. 

- **ProductAttribute (상품 속성)**
  - `AttributeID`: 고유 식별자 (Primary Key, UUID 또는 Auto-Increment Integer)
  - `ProductID`: 상품 ID (Foreign Key, `Product` 테이블 참조)
  - `AttributeName`: 속성 이름 (예: 색상, 사이즈)
  - `AttributeValue`: 속성 값 (예: 빨강, XL)
  - **비즈니스 유연성:** 이 구조는 상품의 특성(속성)을 동적으로 관리할 수 있게 해줍니다. 예를 들어, 특정 상품에 색상, 크기 등의 속성을 추가할 수 있습니다.

- **ProductImage (상품 이미지)**
  - `ImageID`: 고유 식별자 (Primary Key, UUID 또는 Auto-Increment Integer)
  - `ProductID`: 상품 ID (Foreign Key, `Product` 테이블 참조)
  - `ImageURL`: 이미지 경로
  - `AltText`: 대체 텍스트
  - **비즈니스 유연성:** 각 상품에 대해 여러 이미지를 관리할 수 있습니다. 이미지가 변경되거나 추가되는 상황에 유연하게 대응할 수 있습니다.

### 2. **성능 고려 사항**

- **인덱싱:** 
  - `ProductID`, `CategoryID`, `AttributeID`와 같은 주요 키 필드에 인덱스를 생성하여 검색 성능을 향상시킵니다.
  - 자주 사용되는 검색 조건(예: `Price`나 `CategoryID`)에 대해 추가 인덱스를 설정합니다.

- **파티셔닝 (Partitioning):**
  - 대규모 데이터를 처리할 경우, `CreatedAt`을 기준으로 테이블 파티셔닝을 고려할 수 있습니다. 이렇게 하면 최신 데이터를 빠르게 조회할 수 있습니다.

- **캐싱 (Caching):**
  - 조회 빈도가 높은 상품 정보는 캐시 시스템을 활용하여 응답 시간을 줄입니다.

### 3. **유연성 고려 사항**

- **확장성:** 
  - 새로운 속성이나 카테고리 추가 시 기존 구조를 변경하지 않고도 확장할 수 있도록 설계하였습니다. 
  - 예를 들어, 상품 속성은 속성 테이블을 통해 동적으로 관리되므로 다양한 형태의 상품을 다룰 수 있습니다.

- **유지보수 용이성:**
  - 테이블을 명확하게 분리하여 각 기능이 독립적으로 유지보수되도록 설계했습니다. 예를 들어, 카테고리 구조 변경 시 다른 테이블에 영향을 주지 않고도 변경이 가능합니다.

### 4. **ERD (Entity-Relationship Diagram)**
- ERD는 위 설명한 엔티티들과 관계를 시각화한 다이어그램입니다. 관계형 데이터베이스 관리 시스템(RDBMS)을 이용해 설계 시 이 ERD를 기반으로 구현할 수 있습니다.

---

이 데이터 모델은 다양한 비즈니스 요구사항에 유연하게 대응할 수 있으며, 데이터베이스의 성능을 최적화하는 방향으로 설계되었습니다. 질문이나 추가 요구사항이 있으면 언제든지 말씀해주세요!



- (Reference) https://microservices.io/index.html
- (Reference) DDD 설계 참고자료:
    - https://it-noongam.tistory.com/20
    - https://velog.io/@suhongkim98/MSA%EC%99%80-DDD-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%A3%BC%EB%8F%84-%EC%84%A4%EA%B3%84%EB%9E%80-2
- **(Reference) DDD 패턴 참고자료: https://ocwokocw.tistory.com/m/263**
- (Reference) MSA 이벤트 스토밍 - 예제 도메인: https://www.msaschool.io/operation/design/design-three/
- (Reference) 참고도서 - 도메인 주도 설계로 시작하는 마이크로서비스 개발: https://blog.naver.com/anne9/223050025393
- (Reference) 참고도서 - 마이크로서비스 패턴: https://freeend.tistory.com/112
- (Reference) 컨설팅 방법론: NIA_MSA 컨설팅 방법론.pdf
- DDD: Domain Driven Development (후보 서비스 식별, 이벤트 항목 도출, 확장 등)
- 도메인 주도 설계 디자인 패턴 : Agreegate, Factory, Repository 패턴
- https://ocwokocw.tistory.com/m/263
- https://microservices.io/
    
    
- https://velog.io/@tedigom/MSA-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-2-MSA-Outer-Architecure

유스케이스

https://naver.me/FIf8tVGd


- 프로세스 모델링
    - 분석
        - 개발 방법론
        - 현행 시스템 분석
        - 요구사항 정의
        - 화면 정의
        - 인터페이스 정의
        - MSA 서비스 정의
        
    - 설계
        - 화면 설계
        - 인터페이스 설계
        - 비지니스 로직 설계
        - 단위테스트 케이스 설계
        - 통합테스트 케이스 설계
        - MSA 서비스 설계
        
- 데이터 표준화
    - 데이터 표준화
    - 데이터 표준 수립
    - 데이터 표준 관리
    
- 데이터 모델링
    - 데이터 모델링 개념
    - 논리 데이터 모델링
    - 물리 데이터 모델
    
- 데이터 품질/전환 설계
    - 데이터 품질
    - 데이터 전환 설계

- 구현기술 (비지니스 개발)
    - SQL을 통한 데이터베이스 제어 및 데이터 관리
    - UI : javaScript, Framework
    - HTML5 : 기본구문+HTML Tag에 대한 이해
 
> **1.전자상거래 플랫폼 "ShopEase"**
> 

ShopEase는 전 세계 200개국에서 서비스되고 있는 대규모 전자상거래 플랫폼입니다. 연말 세일 기간 동안 여러 기술적 문제가 발생하고 있습니다.

**문제 1.1: SQL 인젝션 방지**

**문제:** 다음 코드는 SQL 인젝션 공격에 취약합니다:

```sql
 string query = "SELECT * FROM users WHERE username  = '" + username + "' AND password = '" + password +  "'";

```

**해결 방안:** Prepared Statements를 사용하여 SQL 인젝션을 방지. 준비된 문을 사용함으로써 사용자 입력 데이터와 SQL 쿼리를 분리하여 안전하게 처리할 수 있다.

```java
String query = "SELECT * FROM users WHERE username  = ? AND password = ?";  PreparedStatement stmt = conn.prepareStatement(query);  stmt.setString(1, username);  stmt.setString(2, password);  ResultSet rs = stmt.executeQuery();

```

**문제 1.2: 데이터 캐시 처리**

**문제:** 상품 상세 정보를 조회할 때마다 데이터베이스 조회가 이루어져 성능 지연 문제가 발생하고 있습니다. 이를 해결하는 방안을 제시하세요.

**해결 방안:** Redis와 같은 인메모리 캐시를 사용하여 자주 조회되는 상품 상세 정보를 캐시 처리.

1. 상품 상세 정보 조회 시 먼저 Redis에서 캐시를 검색.
2. Redis에 캐시가 없는 경우 데이터베이스에서 조회하고, 조회한 데이터를 Redis에 캐시.

**문제 1.3: 시스템 과부하 해결**

**문제:** 연말 세일 동안 서버가 과부하에 걸리고 있습니다. 이에 따라 MSA를 도입하여 해결하고자 합니다. 어떻게 해결 할 수 있는지 방안을 제시하세요.

**해결 방안:** MSA(Microservices Architecture)를 도입하여 시스템을 분리. 각 서비스를 독립적으로 배포하고 확장할 수 있도록 설계합니다.

1. 주요 모듈 (주문, 결제, 재고, 사용자 관리 등)을 각각의 마이크로서비스로 분리.
2. 각 마이크로서비스 간의 통신은 REST API 또는 메시지 큐(RabbitMQ) 등을 사용.
3. 독립적인 배포와 확장을 통해 특정 서비스의 부하가 전체 시스템에 영향을 주지 않도록 함.

**문제 1.4:** **동시성 문제 해결** **문제**

**문제:** 여러 사용자가 동시에 인기 상품의 주문으로 재고가 주러들때 재고 관리의 동시성 문제가 발생합니다.

**해결 방안:** 데이터를 안전하게 관리하기 위해 데이터베이스 행(row) 잠금을 사용하여 동시성을 제어합니다.

```
1. 구매 요청 시, 해당 상품의 재고를 데이터베이스에서 잠금
2. 재고 수량 감소 작업을 수행하고 데이터베이스에 반영.
3. 작업이 완료된 후 재고 잠금을 해제-

```

> **2.** **금융 서비스 플랫폼 "FinancePro"**
> 

**상황:** FinancePro는 전 세계 150개국에서 다양한 금융 서비스를 제공하고 있습니다. 최근 대규모 금융 데이터 유출 사건이 발생했습니다.

**문제 2.1: 데이터 암호화**

**문제:** 중요한 금융 데이터를 AES256 방식으로 암호화하여 데이터베이스에 저장하고, 조회 시 복호화해야 합니다.

**해결 방안:** AES256 암호화를 적용하여 데이터를 안전하게 저장 및 조회.

1. 데이터 저장 시 AES256 알고리즘을 이용하여 데이터를 암호화.
2. 암호화된 데이터를 데이터베이스에 저장.
3. 데이터 조회 시 AES256 알고리즘을 이용하여 데이터를 복호화.
4. 암호화 키는 안전한 키 저장소에 보관.

**문제 2.2: 세션 만료 문제**

**문제:** 사용자 로그인 세션이 일정 시간 후 자동 로그아웃이 되도록 설정해야 합니다.

**해결 방안:** JWT 토큰 기반의 세션 관리를 사용하여 발행한 토큰에 만료 시간을 설정. 만료 시 새로운 토큰을 발행하는 방법을 설계.

1. 로그인 시 JWT 토큰을 생성하고, 만료 시간을 설정.
2. 클라이언트는 각 요청 시 JWT 토큰을 포함하여 전송.
3. 서버는 요청 시 토큰의 유효성을 확인하고 만료 시간을 체크.
4. 만료된 토큰이 요청될 경우 새로 로그인이 필요하도록 처리.

**문제 2.3: 대기열 처리**

**문제:** 거래 요청이 대량으로 발생하여 시스템의 실시간 처리 능력이 부족합니다. 대기열을 통해 거래 요청을 효율적으로 처리해야 합니다?

**해결 방안:** 메시지 큐 시스템을 사용하여 대기열을 처리.

1. 각 거래 요청을 메시지 큐(ex: Apache Kafka, RabbitMQ)에 넣음.
2. 비동기적으로 큐에서 메시지를 소비하여 거래를 처리.
3. 스케일링이 필요할 때 소비자 인스턴스를 추가로 늘려서 처리량을 조절.

> **3.** 의학 연구 데이터 플랫폼 "MediResearch”
> 

MediResearch는 의학 연구 데이터를 관리, 분석하는 플랫폼입니다. 다양한 외부 의학 데이터를 수집하며, 최근 데이터 수집 프로세스에서 성능 문제와 오류가 발생하고 있습니다. 비동기 데이터 수집 시스템을 개선하고 서킷브레이커 패턴을 적용해야 하는 요구사항이 있습니다..

**문제 3.1:** **서킷브레이커를 통한 데이터 수집 API 호출 안정성 확보** **문제**

**문제:** 외부 의학 데이터 API 호출 중 자주 타임아웃과 실패가 발생하여 데이터 수집이 원활하지 않습니다.

**해결 방안:** 서킷브레이커 패턴을 적용하여 외부 데이터 수집 API 호출의 안정성을 높입니다.

```
1. 서킷브레이커 라이브러리를 사용하여 외부 데이터 수집 API 호출을 감싸는 서킷브레이커를 설정합니다.
2. 실패율이 일정 임계값을 초과하면 서킷브레이커가 열려 호출을 차단합니다.
3. 일정 시간 후 서킷브레이커가 닫혀 재시도합니다.
4. 호출 실패 시 대체(fallback) 동작을 정의합니다.

```

**문제 3.2:** **비동기 데이터 수집 처리** **문제**

**문제:** 의학 데이터를 수집하는 동안 데이터 처리 요청이 급증하여 서버가 과부하 상태입니다. 데이터를 비동기로 수집하여 처리하세요.

**해결 방안:** 메시지 큐를 사용하여 데이터를 비동기로 수집하고 처리합니다

```
1. 데이터 수집 요청이 들어오면 메시지 큐(예: RabbitMQ 또는 Kafka)에 데이터 수집 요청 메시지를 게시합니다.
2. 데이터 수집 작업을 수행하는 소비자가 메시지 큐에서 요청 메시지를 읽어 데이터를 수집합니다.
3. 수집된 데이터를 데이터베이스에 저장하고 로그를 기록합니다.

```

> 4. 모바일 플랫폼 "MobileConnect"
> 

MobileConnect는 다양한 서비스를 제공하는 모바일 플랫폼입니다. 최근 사용자 메시지 기록이 급증하여 기존 관계형 데이터베이스로는 성능 저하와 저장공간 부족 문제가 자주 발생하고 있습니다.

### 문제 4.1: 메시지 기록 데이터 저장 문제

**상황:** MobileConnect는 하루 수백만 건의 사용자 메시지를 처리하고 있으며, 이에 따라 메시지 저장 및 조회 시 성능 저하가 발생하고 있습니다. 또한, 메시지 데이터의 다양한 형태와 증가하는 데이터 양을 효율적으로 관리할 필요가 있습니다.

**문제:** 메시지 기록 데이터를 효율적으로 저장하고 빠르게 조회할 수 있는 새로운 데이터베이스 솔루션이 필요합니다.

**해결 방안:** NoSQL 데이터베이스를 도입하여 메시지 기록 데이터를 효율적으로 저장하고 조회 성능을 높입니다.

1. **NoSQL****의 필요성 평가:**
- **수평적 확장성:** NoSQL은 샤딩을 통해 수평적으로 확장 가능, 대규모 데이터 처리에 적합.
- **유연한 스키마:** 메시지 데이터의 다양한 형태에도 유연하게 대응 가능합니다.
- **고성능 쿼리:** 인덱스를 활용하여 메시지 조회 성능을 높일 수 있습니다.
- **NoSQL****과 관계형 데이터베이스의 차이:**
- **스키마 유연성:** NoSQL은 스키마가 유연하며, 데이터 구조 변화에 쉽게 대응 가능.
- **확장성:** NoSQL은 데이터 노드를 추가함으로써 쉽게 확장 가능, 관계형 데이터베이스는 수직적 확장이 더 일반적.
- **성능:** 읽기/쓰기 성능이 높아 대량의 데이터를 효율적으로 처리 가능.
- **일반적인 NoSQL 데이터베이스 사용 예시 및 데이터 모델링:**
- **도큐먼트 데이터베이스 (예: MongoDB):**
    - **사용 예시:** 각 메시지를 하나의 도큐먼트로 저장하여 사용자 간 메시지를 관리합니다.
    - **데이터 모델링:** 메시지 자체를 JSON 객체로 저장하고, 메타데이터(발신자, 수신자, 타임스탬프, 메시지 내용 등)를 포함.
- **컬럼 패밀리 데이터베이스 (예: Cassandra):**
    - **사용 예시:** 사용자별 메시지 기록을 컬럼 패밀리에 저장하여 사용자간 메시지 조회 성능을 높입니다.
    - **데이터 모델링:** 각 사용자 ID를 파티션 키로, 메시지 ID와 타임스탬프를 클러스터링 키로 사용하여 메시지 데이터를 저장.
- **도입 후 기대효과:**
- **성능 향상:** 대량의 메시지 데이터를 빠르게 저장 및 조회하여 사용자 경험 향상.
- **확장성 제공:** 사용자 증가에 따라 쉽게 데이터 노드를 추가하여 확장 가능.
- **유연성 증가:** 변화하는 메시지 데이터 구조에 빠르게 대응 가능.

### **문제** 4.2: 대규모 로그 관리

**문제**: 시스템에서 생성되는 대규모 로그 데이터를 효율적으로 저장 및 관리해야 합니다. 기존 로그 서버가 빠르게 용량을 채우고 있습니다.

**해결** **방안**: 중앙화된 로그 관리 시스템을 구축하여 로그 데이터를 효율적으로 관리.

```
1. ELK 스택(Elasticsearch, Logstash, Kibana) 또는 Graylog 같은 중앙화된 로그 관리 시스템을 도입.
2. 로그 데이터를 실시간으로 수집하여 중앙화된 시스템으로 전송.
3. Kibana 또는 Graylog를 통해 실시간 로그 모니터링 및 분석 기능을 제공.

```

> **5.** **글로벌 전자상거래 플랫폼 "ShopWorld"**
> 

ShopWorld는 200개국 이상에서 서비스 중인 대규모 전자상거래 플랫폼입니다. 최근 5년간 연평균 성장률 40%를 기록하며 급격히 성장했습니다. 현재 일일 활성 사용자 수 1,000만 명, 월간 거래액 10억 달러를 돌파했습니다. 그러나 이러한 급격한 성장으로 인해 여러 기술적 문제가 발생하고 있습니다. 주요 이슈로는 주문 처리 지연, 결제 시스템 불안정, 제품 검색 속도 저하, 그리고 최근 발생한 개인정보 유출 사고 등이 있습니다. 특히 성수기인 연말 쇼핑 시즌에는 시스템 과부하로 인한 서비스 중단 사태가 반복되고 있어 사용자 불만이 고조되고 있는 상황입니다. 또한, 글로벌 서비스 특성상 다국어 지원, 다양한 통화 및 결제 시스템 연동, 국가별 규제 준수 등의 복잡한 요구사항을 만족시켜야 합니다. 현재 레거시 모놀리식 아키텍처를 사용 중이나, 이를 현대화하여 확장성과 유연성을 개선해야 한다는 내부 의견이 지배적입니다. 경영진은 이러한 문제들을 해결하고 향후 5년간 연 50% 성장을 목표로 하는 새로운 기술 전략 수립을 요구하고 있습니다.

**a)** **평가 목표: 데이터베이스 설계 및 최적화문제:** ShopWorld의 제품 카탈로그와 주문 정보를 효율적으로 관리하기 위한 데이터베이스 설계 전략을 수립하세요. 현재 단일 관계형 데이터베이스를 사용 중이나, 일일 1,000만 건 이상의 주문과 5억 개 이상의 제품 데이터를 처리하는 데 어려움을 겪고 있습니다. 특히 성수기에는 주문 처리 속도가 크게 저하되는 문제가 있습니다. 확장성, 성능, 데이터 일관성을 모두 고려한 새로운 데이터베이스 아키텍처를 제안하세요.

**요구사항:** 요구사항 추가에 따른 데이터베이스 설계, 테이블 파티션, 데이터 일관성 유지

**c)** **평가 목표: 대규모 트래픽 처리문제:** 지난 블랙 프라이데이 세일 기간 동안 평소 대비 10배 이상의 트래픽이 몰려 2시간 동안 서비스가 중단되는 사태가 발생했습니다. 이로 인해 추정 손실액이 5,000만 달러에 달합니다. 다가오는 연말 쇼핑 시즌에 예상되는 최대 초당 100만 건의 요청을 안정적으로 처리하고, 갑작스러운 트래픽 증가에도 유연하게 대응할 수 있는 시스템 아키텍처를 설계하세요. 글로벌 서비스임을 고려하여 지역별 특성도 반영해야 합니다.

**요구사항:** 대기열 처리

> **6.** **글로벌 음악 스트리밍 서비스 "TuneStream"**
> 

TuneStream은 전 세계 180개국에서 서비스 중인 음악 스트리밍 플랫폼입니다. 최근 5년간 연평균 성장률 30%를 기록하며, 현재 월간 활성 사용자는 8천만 명에 달합니다. 사용자는 실시간 스트리밍, 개인 맞춤형 추천 플레이리스트, 온/오프라인 매장 등 다양한 기능을 이용할 수 있습니다. 그러나 급격한 사용자 증가로 인해 스트리밍 / 주문처리 지연, 데이터베이스 성능 저하 문제 등이 발생하고 있습니다.

**a)** **평가 목표: 동시성 처리문제:** 선착순 10,000명에게만 음악 스트리밍 상품 구매시 50% 할인을 적용하려고 합니다. 모든 사용자가 동시에 상품을 구매하려고 할 때 발생할 수 있는 동시성 문제를 해결하는 시스템을 구성하세요.

**b)** **평가 목표: 서킷브레이커문제:** 원격서비스가 자주 타임아웃이 발생하여 오류가 발생합니다. 서비스의 정상적인 응답을 보장하기 위하여 방안을 제안하세요.

**c)** **평가 목표: 비동기처리문제:** 전반적인 시스템 처리 성능이 지연되어, 스트리밍 상품 외 배송 상품 주문처리 시 주문 완료 시간이 지연되고 있습니다. 이를 개선하기 위한 비동기 처리 방안을 구성하세요

---

## typora-root-url: ./images
typora-copy-images-to: ./images

**시나리오 1**

**상황:** 통신사 K는 핸드폰 구매 처리 과정에서 자주 오류가 발생하고 있습니다. 주요 문제는 아래와 같습니다:

1. 주문이 실패했지만 결제 처리가 됨
2. 주문이 성공했지만 배송 정보 저장이 실패해 배송이 불가능함

이러한 문제는 매출 손실과 고객 신뢰도 저하로 이어지고 있습니다. 따라서, 요금제 및 핸드폰 판매 과정의 신뢰성을 개선해야 합니다.

**문제:**

1. 배송 정보 저장이 실패한 경우 주문 성공을 막는 방안
**힌트**: 트랜잭션(transaction)을 사용하여 여러 데이터베이스 작업을 하나의 단위로 묶는 방법을 고려하세요. 트랜잭션이 실패하면 모든 작업이 롤백(rollback)되어 데이터베이스 상태가 일관되게 유지됩니다.
2. 주문 실패한 경우, 외부 시스템 결제 정보를 자동 취소처리 하는 방안
**힌트**: 트랜젝션이 실패하면 보상처리 방법을 고려하세요..

---

**시나리오 2**

**상황:** K 통신사는 고객의 개인정보를 안전하게 보호하기 위해 시스템 보안을 강화하려고 합니다. ABC 통신사는 고객의 비밀번호를 안전하게 저장해야 합니다. 이를 위해 다음과 같은 요구사항을 충족해야 합니다:

1. 비밀번호는 평문으로 저장되어서는 안 됩니다.
2. 해킹 공격(예: 무차별 대입 공격, 사전 공격)에 대비할 수 있는 충분한 보안 수준을 제공해야 합니다.

**문제:**

1. 고객의 비밀번호를 안전하게 저장하기 위해 어떤 방법을 사용할 수 있는가?
**힌트**: 해시 함수(hash function)와 솔트(salt)를 사용하여 비밀번호를 안전하게 저장할 수 있습니다.
2. 고객이 안전하게 로그인할 수 있도록 로그인 절차를 설계하고, 이에 필요한 보안 대책을 설명하세요.
힌트: JWT(JSON Web Token)와 같은 토큰 기반 인증을 사용하세요. TLS/SSL을 통해 데이터 전송 시 암호화하는 것도 중요한 보안 대책입니다.

---

**시나리오 3**

**상황:** K 통신사의 개발 팀은 사용자 정보 조회 기능을 포함한 예약 시스템을 개발 중입니다. 사용자가 자신의 정보를 조회하기 위해 사용자 ID를 입력하면, 서버는 다음과 같은 SQL 쿼리를 실행합니다:

```sql
SELECT * FROM users WHERE user_id = '<사용자 입력>';

```

여기서 <사용자 입력> 부분은 사용자가 웹 애플리케이션의 입력 필드에 직접 입력한 값으로 대체됩니다.

**문제:**

1. 위와 같은 입력이 취약한 이유를 설명하세요.
**힌트**: SQL 인젝션(SQL Injection) 공격에 취약할 수 있습니다. 이는 사용자가 입력한 값이 그대로 SQL 쿼리에 포함되면서 발생하는 보안 취약점입니다.
2. 취약한 문제를 해결하기 위한 방안을 제시하세요.
**힌트**: 준비된 문(Prepared Statements) 또는 ORM(Object-Relational Mapping)을 사용하여 사용자 입력 값을 안전하게 처리하세요.

---

**시나리오 4**

**상황:** 통신사 K사는 고객의 통화 기록을 대량의 데이터로 관리하고 있습니다. 이 많은 데이터를 효율적으로 관리하고 쿼리 성능을 최적화하기 위해 테이블 개선을 해야 합니다. 통화 기록은 월별로 조회가 되며, 매달 1년이 지난 데이터는 삭제를 해야 합니다.

**통화 기록 테이블:**

```sql
CREATE TABLE call_records (
 id INT PRIMARY KEY,
 user_id INT,
 call_date DATE,
 duration INT,
 destination VARCHAR(50)
);

```

**문제:**

1. 월별 조회 성능 향상과 데이터 삭제를 효율적으로 하기 위한 방안을 제시하세요.
**힌트**: 파티셔닝(partitioning)을 사용하여 데이터를 월별로 분할하세요.
2. 위에 제시한 방안의 장점을 설명하세요.
3. 데이터 삭제를 자동화하는 방안을 제시하세요.
**힌트**: 스케줄러나 이벤트 트리거를 사용하여 일정 기간마다 자동으로 오래된 데이터를 삭제하는 스크립트를 실행할 수 있습니다.

---

**시나리오 5**

**상황:** K 통신사는 자사의 모바일 앱을 사용하는 수백만 명의 고객에게 중요한 공지 사항과 프로모션 정보를 실시간으로 전달하기 위해 Push 알림 서비스를 제공하고 있습니다. K 통신사는 대규모 고객에게 효율적으로 Push 알림을 전송하면서도 서버 부하를 최소화하고, 메시지가 신속하게 전달되도록 해야 합니다. 알림을 제공하기 위해 웹소켓(WebSocket) 기술을 도입하려고 합니다.

**문제:**

1. 웹소켓을 사용하여 서버와 클라이언트 간 실시간 통신을 설정하는 기본적인 방법과 단계를 설명하세요.**
****힌트**: 서버는 WebSocket 서버를 시작하고, 클라이언트는 WebSocket 객체를 생성하여 서버에 연결합니다. 연결이 성공하면 서버와 클라이언트 간 실시간 메시지 전송이 가능합니다.
2. 웹소켓 연결에서 발생할 수 있는 보안 문제들을 제시하고, 각각의 문제 해결 방안을 제시하세요.
**힌트**: XSS(교차 사이트 스크립팅) 공격을 방지하기 위해 데이터 검증 및 인코딩을 수행하고, WebSocket 연결을 SSL/TLS를 통해 암호화하여 데이터 전송 시 보안을 강화하세요.

---

**시나리오 6**

**상황:** 통신사 K는 고객 서비스 웹 애플리케이션의 성능을 최적화하고자 합니다. 이 웹 애플리케이션은 다양한 데이터 조회 및 계산 작업을 수행하며, 많은 수의 고객 요청을 처리해야 합니다. 특히, 특정 고객 정보 조회 및 통계 계산이 빈번히 발생하며, 이로 인해 데이터베이스에 큰 부하가 가해지고 있습니다. 이를 해결하기 위해 메모리 캐시를 활용하여 성능을 최적화하고자 합니다.

**문제:**

1. 캐시의 효율성을 높이기 위해 고려해야 할 캐시 갱신 정책과 캐시 만료 정책을 설명하세요.
**힌트**: LRU(Least Recently Used), LFU(Least Frequently Used)와 같은 캐시 갱신 정책을 고려하세요. 캐시 만료 정책으로는 TTL(Time-To-Live)이나 만료 시간 설정을 통해 데이터의 최신성을 유지할 수 있습니다.

---

**시나리오 7**

**상황: 통신사 K는 고객 정보를 관리하기 위해 RESTful API를 설계하고자 합니다. 이 API는 고객 생성(Create), 조회(Read), 수정(Update), 삭제(Delete)와 같은 기본 CRUD 기능을 제공해야 합니다. API는 클라이언트 애플리케이션과 통신하여 데이터를 주고받으며, 보안 및 성능 또한 고려해야 합니다.**

**문제:**

1. RESTful API를 설계할 때 고려해야 할 주요 요소를 설명하세요.
**힌트**: 리소스(URI)설계, HTTP메서드(GET,POST,PUT), 상태코드, 데이터 형식, 보안 등을 고려해야 합니다.
2. API의 보안을 강화하기 위한 방법을 설명하고, 예를 들어 설명하세요.
**힌트**: OAuth2, JWT를 사용한 토큰 기반 인증, HTTPS를 통한 데이터 암호화, 입력 검증 및 데이터 인코딩을 통해 API 보안을 강화할 수 있습니다.

---

**시나리오 8**

**상황: 통신사 K는 사내 관리 시스템에서 역할 기반 접근 제어(권한관리)를 도입하려고 합니다. RBAC를 통해 직원들이 자신의 역할에 맞는 기능과 데이터에만 접근할 수 있도록 제한하려고 합니다. 현재 시스템에는 다양한 역할(예: 관리자, 매니저, 직원)이 있으며, 각 역할에 따라 접근 권한이 달라야 합니다.**

**문제:**

1. 역할 기반 접근 제어(RBAC)의 개념을 설명하고, RBAC의 주요 구성 요소(역할, 사용자, 권한)에 대해 설명하세요.
**힌트**: RBAC는 사용자에게 역할을 부여하고, 역할에 권한을 부여하여 접근을 제어하는 시스템입니다. 역할(Role)은 특정 권한(Privilege)을 가지며, 사용자는 하나 이상의 역할을 가질 수 있습니다.
2. 통신사 K의 사내 관리 시스템에 RBAC를 적용하기 위한 데이터베이스(역할, 사용자, 권한) 테이블을 설계하고 ERD를 작성하세요.
**힌트**: 사용자 테이블(Users), 역할 테이블(Roles), 권한 테이블(Permissions)과 사용자-역할(UserRoles), 역할-권한(RolePermissions) 관계 테이블을 설계하세요. ERD를 통해 각 테이블 간 관계를 시각화하세요 

---



> 주제: A고객사 시스템의 채널 확대 및 사용자 증가에 따라 발생하는 인증 및 세션 관리 문제 해결을 위한 인증방식 개선 방안
> 

<전제조건>
- session time : 30분
- 중복 로그인 방지

문1) 사용자 증가에 따른 인증 관리 체계의 부담을 줄이기 위한 방안을 고안하고 방식을 설계하시오
       각 서비스는 고객 증가에 따른 인증 장애 요인을 배제하여야 한다.

문2) B2B고객을 위한 제로 트러스트 인증 방식을 설계 하시오

문3) 중복 로그인 배제를 위한 방안을 설계 하시오

문4) 인증 방식의 전환에 대한 방안을 설계 하시오
   <조건>
- AS-IS : Legacy 인증방식
- TO-BE : oauth 2.0 인증방식

문5) 인증 불일치 또는 Session 만료에 따른 처리에 대한 UI 처리방안을 설계 하시오.

- front End 관점 문제 출제 가능성도 고려 할 것

[주제2]
- A고객사 비즈니스 유연성과 성능 관점에서 상품을 관리하기 위한 데이터 모델을 새롭게 설계하고 설계 사유 제시

<전제조건>
-ERD 가 주어진다. 해당 내용을 분석하고 모델링을 하여라

문1. 예약 위주의 상품 관련 데이터 모델에 판매 가능한 상품 유형을 추가하기 위한 방안을 설계 하시오

문2. 입점업체에 대한 상품 주문 관련 서비스 모델을 제시 하시오.

문3. 주문 절차에 대한 프로세스를 설계 하시오

문4. 상품 출시에 대한 라이프사이클에 대한 모델을 제시하시오.

문5. 유사상품에 대한 옵션들을 나열하고 관리방안에 대한 모델을 제시 하시오.

[주제3]
- 예약 처리 프로세스와 데이터 모델에서 발생하고 있는 동시성 이슈의 해결 방안 제시

문1. 다수의 사용자가 다수의 인벤토리 예약하기 위한 데이터 모델의 문제점을 확인하고, 해결을 위한 방안을 제시 하시오.       서비스는 Async 하게 구현 되어야 한다.

문2. 예약된 서비스에 대해 취소 프로세스를 구성하시오

문3. 다수의 사용자가 하나의 인벤토리 예약을 위한 데이터 모델을 설계 하고 예약에 대한 프로세스를 설계 하시오.
